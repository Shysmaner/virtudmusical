var c=Object.defineProperty;var l=(i,t,e)=>t in i?c(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var n=(i,t,e)=>l(i,typeof t!="symbol"?t+"":t,e);import{R as h,j as s,d}from"./TagsComponent-vu07Nl3u.js";import{q as m,c as g,w as p,g as y}from"./HeaderWithSearchComponent-DlSI16zO.js";import{d as f}from"./main-BC4DEmcr.js";import"./SongComponent-CoQsU9OQ.js";import{a as u}from"./ViewsIncrement-Br7Ru1av.js";class b extends h.Component{constructor(e){super(e);n(this,"fetchSong",async()=>{const{songName:e}=this.props;try{const r=m(g(f,"songs"),p("title","==",e)),o=await y(r);if(o.empty)console.log("Song not found with title "+e);else{const a=o.docs[0].data();this.setState({song:a})}}catch(r){console.error("Error fetching song: ",r)}});n(this,"incrementView",async()=>{try{const{songName:e}=this.props;await u(e),this.setState({hasIncrementedView:!0})}catch(e){console.error("Error incrementing view: ",e)}});this.state={song:null,hasIncrementedView:!1}}componentDidMount(){this.fetchSong()}componentDidUpdate(e,r){this.state.song&&!this.state.hasIncrementedView&&this.incrementView()}render(){const{song:e}=this.state;if(!e)return s.jsx("p",{className:"cargando",children:"Loading..."});const r=e.videoUrl.match(/src="([^"]+)"/)[1];return s.jsxs("div",{className:"song-component",lang:"en",children:[s.jsxs("h1",{className:"song-title",children:[e.title," Lyrics by ",e.artist]}),r&&s.jsx("iframe",{width:"560",height:"315",src:r,title:`${e.title} official video`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),s.jsxs("p",{className:"song-views",children:[s.jsx("i",{className:"fa-regular fa-eye"}),e.views," views"]}),s.jsx("div",{className:"lyrics",dangerouslySetInnerHTML:{__html:e.lyrics}}),s.jsxs("div",{className:"song-extra",children:[s.jsxs("p",{children:["Listen to ",s.jsx("strong",{children:e.title})," by ",s.jsx("strong",{children:e.artist}),". Find the full lyrics, official video, and more popular songs by ",e.artist,"."]}),s.jsxs("p",{children:["Fans searching for “lyrics ",e.title," ",e.artist,"” or “",e.artist," latest hits” will find everything here."]})]}),s.jsxs("p",{className:"copyright",children:["Song ",e.title," by ",e.artist,". All rights reserved."]}),s.jsxs("p",{className:"contact-message",children:["Notice any errors in the lyrics? Have any suggestions? Contact us via our email ",s.jsx("a",{href:`${d}/src/contact/index.html`,children:"here"}),"."]})]})}}export{b as G};
