var p=Object.defineProperty;var h=(n,r,e)=>r in n?p(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e;var l=(n,r,e)=>h(n,typeof r!="symbol"?r+"":r,e);import{R as d,j as t}from"./TagsComponent-B2N3reKh.js";import{q as m,c as g,w as y,g as u}from"./HeaderWithSearchComponent-xTrOAoUr.js";import{d as f}from"./main-Cb0_GsMS.js";import"./SongComponent-v46DJIu5.js";import{a as w}from"./ViewsIncrement-BSjlBeua.js";class T extends d.Component{constructor(e){super(e);l(this,"fetchSong",async e=>{try{const s=m(g(f,"songs"),y("title","==",e)),o=await u(s);if(o.empty)console.log("Lyrics not found,"+e);else{const i=o.docs[0].data(),c=i.title.replace("Traducción-Translation","").trim(),a={...i,title:`Translation of ${c} to Spanish`};this.setState({song:a})}}catch(s){console.error("Error fetching song: ",s)}});l(this,"incrementView",async e=>{try{await w(e),this.setState({hasIncrementedView:!0})}catch(s){console.error("Error incrementando la vista: ",s)}});this.state={song:null,hasIncrementedView:!1}}componentDidMount(){this.fetchSong(this.props.songName)}componentDidUpdate(e,s){this.state.song&&!this.state.hasIncrementedView&&this.incrementView(this.props.songName)}renderLyrics(e,s){const o=e.split("<br>"),i=s.split("<br>");return o.map((c,a)=>t.jsxs("div",{children:[t.jsx("p",{className:"english-lyrics",dangerouslySetInnerHTML:{__html:c}}),i[a]&&t.jsx("p",{className:"spanish-lyrics",dangerouslySetInnerHTML:{__html:i[a]}})]},a))}render(){const{song:e}=this.state;if(!e)return t.jsx("p",{className:"cargando",children:"Loading..."});const s=e.videoUrl.match(/src="([^"]+)"/)[1];return t.jsxs("div",{className:"song-component",children:[t.jsx("h2",{children:e.title}),t.jsxs("p",{children:[t.jsx("i",{className:"fa-regular fa-eye"}),e.views]}),e.lyrics&&e.translatedLyrics?this.renderLyrics(e.lyrics,e.translatedLyrics):t.jsx("p",{children:"No lyrics available."}),s&&t.jsx("iframe",{width:"560",height:"315",src:s,title:"Video de la canción",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),t.jsxs("p",{children:["Song by ",e.artist,". All rights reserved."]})]})}}export{T as G};
